import{_ as g,o as u,c as h,a as d,d as t,F as m,f as x,g as $,t as r,h as f,v as C}from"./index-10ddbedb.js";const{VITE_APP_URL:o,VITE_APP_PATH:n}={VITE_APP_URL:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"jimmychang",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{products:[],apiUrl:"https://vue3-course-api.hexschool.io/v2",path:"jimmychang",productId:"",cart:{},order:{user:{email:"",name:"",tel:"",address:""},message:""},resetData:{user:{email:"",name:"",tel:"",address:""},message:""}}},methods:{getCar(){const e=`${o}/api/${n}/cart`;this.$http.get(e).then(s=>{this.cart=s.data.data}).catch(s=>{alert("購物車失敗")})},updateCarItem(e){const s={product_id:e.product.id,qty:e.qty},c=`${o}/api/${n}/cart/${e.id}`;this.$http.put(c,{data:s}).then(p=>{alert("更新成功"),this.getCar()}).catch(p=>{alert("更新失敗")})},deleteCarItem(e){let s="";e.id?s=`${o}/api/${n}/cart/${e.id}`:s=`${o}/api/${n}/carts`,this.$http.delete(s).then(c=>{alert("刪除成功"),this.getCar()}).catch(c=>{alert("刪除失敗")})},onSubmit(){const e=`${o}/api/${n}/order`;this.$http.post(e,{data:this.order}).then(s=>{alert("結帳成功"),this.getCar(),this.order=this.resetData}).catch(s=>{alert("結帳失敗")})}},mounted(){this.getCar()},components:{}},b={class:"table align-middle"},v=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-end"},"單價")])],-1),P=["onClick"],V=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),I=t("div",{class:"text-success"},"已套用優惠券",-1),E={class:"input-group input-group-sm"},T={class:"input-group mb-3"},A=["onUpdate:modelValue","onChange"],D={class:"input-group-text",id:"basic-addon2"},k={class:"text-end"},U=t("small",{class:"text-success"},"折扣價：",-1),q=t("td",{colspan:"3",class:"text-end"},"總計",-1),B={class:"text-end"},L=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),R={class:"text-end text-success"};function w(e,s,c,p,l,_){return u(),h(m,null,[d(" 這是購物車頁面 "),t("table",b,[v,t("tbody",null,[l.cart.carts?(u(!0),h(m,{key:0},x(l.cart.carts,a=>(u(),h("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:i=>_.deleteCarItem(a)},[V,d(" x ")],8,P)]),t("td",null,[d(r(a.product.title)+" ",1),I]),t("td",null,[t("div",E,[t("div",T,[f(t("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":i=>a.qty=i,onChange:i=>_.updateCarItem(a)},null,40,A),[[C,a.qty]]),t("span",D,r(a.qty),1)])])]),t("td",k,[U,d(" "+r(a.total),1)])]))),128)):$("",!0)]),t("tfoot",null,[t("tr",null,[q,t("td",B,r(l.cart.total),1)]),t("tr",null,[L,t("td",R,r(l.cart.final_total),1)])])])],64)}const S=g(y,[["render",w]]);export{S as default};
